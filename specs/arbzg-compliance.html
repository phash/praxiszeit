<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ArbZG-Compliance â€“ PraxisZeit</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: #f1f5f9;
      color: #1e293b;
      line-height: 1.6;
    }
    .header {
      background: linear-gradient(135deg, #1e3a5f 0%, #2563eb 100%);
      color: white;
      padding: 2.5rem 2rem;
      text-align: center;
    }
    .header h1 { font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; }
    .header .subtitle { opacity: 0.85; font-size: 0.95rem; }
    .header .date-badge {
      display: inline-block;
      background: rgba(255,255,255,0.2);
      padding: 0.25rem 0.9rem;
      border-radius: 999px;
      font-size: 0.8rem;
      margin-top: 0.75rem;
    }
    .container { max-width: 1100px; margin: 0 auto; padding: 2rem 1rem; }

    .summary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2.5rem;
    }
    .summary-card {
      background: white;
      border-radius: 12px;
      padding: 1.25rem;
      box-shadow: 0 1px 4px rgba(0,0,0,0.08);
      border-top: 4px solid;
      text-align: center;
    }
    .summary-card.ok { border-color: #22c55e; }
    .summary-card.warn { border-color: #f59e0b; }
    .summary-card.fail { border-color: #ef4444; }
    .summary-card .icon { font-size: 2rem; margin-bottom: 0.5rem; }
    .summary-card .label { font-weight: 600; font-size: 0.85rem; color: #475569; }
    .summary-card .count { font-size: 2rem; font-weight: 700; margin: 0.25rem 0; }
    .summary-card.ok .count { color: #16a34a; }
    .summary-card.warn .count { color: #d97706; }
    .summary-card.fail .count { color: #dc2626; }

    .section {
      background: white;
      border-radius: 14px;
      margin-bottom: 1.5rem;
      box-shadow: 0 1px 4px rgba(0,0,0,0.08);
      overflow: hidden;
    }
    .section-header {
      padding: 1.1rem 1.5rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      cursor: pointer;
      user-select: none;
      border-bottom: 1px solid transparent;
      transition: background 0.15s;
    }
    .section-header:hover { background: #f8fafc; }
    .section.open .section-header { border-bottom-color: #e2e8f0; }
    .section-par {
      font-size: 0.8rem;
      font-weight: 700;
      color: white;
      background: #2563eb;
      padding: 0.2rem 0.6rem;
      border-radius: 6px;
      white-space: nowrap;
    }
    .section-title { font-weight: 700; font-size: 1.05rem; flex: 1; }
    .section-status { font-size: 1.3rem; flex-shrink: 0; }
    .section-chevron { color: #94a3b8; font-size: 0.8rem; transition: transform 0.2s; }
    .section.open .section-chevron { transform: rotate(180deg); }
    .section-body { padding: 1.5rem; display: none; }
    .section.open .section-body { display: block; }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.88rem;
      margin-top: 1rem;
    }
    th {
      background: #f8fafc;
      padding: 0.65rem 1rem;
      text-align: left;
      font-weight: 600;
      color: #475569;
      border-bottom: 2px solid #e2e8f0;
    }
    td {
      padding: 0.65rem 1rem;
      border-bottom: 1px solid #f1f5f9;
      vertical-align: top;
    }
    tr:last-child td { border-bottom: none; }
    .badge {
      display: inline-block;
      padding: 0.2rem 0.55rem;
      border-radius: 6px;
      font-size: 0.78rem;
      font-weight: 600;
      white-space: nowrap;
    }
    .badge-ok { background: #dcfce7; color: #166534; }
    .badge-warn { background: #fef3c7; color: #92400e; }
    .badge-fail { background: #fee2e2; color: #991b1b; }

    .law-box {
      background: #eff6ff;
      border-left: 4px solid #2563eb;
      padding: 0.9rem 1.1rem;
      border-radius: 0 8px 8px 0;
      margin-bottom: 1.2rem;
      font-size: 0.9rem;
    }
    .law-box strong { color: #1e40af; }
    .law-box ul { margin-left: 1.2rem; margin-top: 0.4rem; }
    .law-box li { margin-bottom: 0.2rem; }

    .prio-list { list-style: none; }
    .prio-list li {
      padding: 0.75rem 1rem;
      border-radius: 8px;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      font-size: 0.9rem;
    }
    .prio-list li.p1 { background: #fee2e2; }
    .prio-list li.p2 { background: #fef3c7; }
    .prio-list li.p3 { background: #f0fdf4; }
    .prio-tag {
      font-size: 0.7rem;
      font-weight: 700;
      padding: 0.15rem 0.45rem;
      border-radius: 4px;
      white-space: nowrap;
      flex-shrink: 0;
      margin-top: 0.15rem;
    }
    .p1 .prio-tag { background: #ef4444; color: white; }
    .p2 .prio-tag { background: #f59e0b; color: white; }
    .p3 .prio-tag { background: #22c55e; color: white; }

    .fine-table td:last-child { font-weight: 700; color: #dc2626; }

    .controls {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
      justify-content: flex-end;
    }
    .btn {
      padding: 0.4rem 1rem;
      border-radius: 7px;
      border: 1px solid #e2e8f0;
      background: white;
      color: #475569;
      font-size: 0.82rem;
      cursor: pointer;
      font-family: inherit;
      transition: all 0.15s;
    }
    .btn:hover { background: #f1f5f9; border-color: #cbd5e1; }

    h3 { font-size: 0.95rem; color: #1e293b; margin: 1rem 0 0.5rem; font-weight: 600; }
    p { color: #475569; font-size: 0.9rem; margin-bottom: 0.5rem; }
    code { background: #f1f5f9; padding: 0.1rem 0.35rem; border-radius: 4px; font-size: 0.82rem; color: #1e40af; }

    .hint-box {
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 10px;
      padding: 1rem 1.2rem;
      font-size: 0.85rem;
      color: #64748b;
      margin-top: 2rem;
      text-align: center;
    }
    .hint-box strong { color: #1e293b; }
    .ok-note { margin-top: 0.75rem; color: #16a34a; font-weight: 600; font-size: 0.9rem; }
  </style>
</head>
<body>

<div class="header">
  <h1>ArbZG-Compliance â€“ PraxisZeit</h1>
  <p class="subtitle">VollstÃ¤ndiger Abgleich: Arbeitszeitgesetz â†” Implementierungsstand</p>
  <div class="date-badge">Stand: Februar 2026 &nbsp;Â·&nbsp; Gesetzesquelle: gesetze-im-internet.de/arbzg</div>
</div>

<div class="container">

  <div class="summary-grid">
    <div class="summary-card ok">
      <div class="icon">âœ…</div>
      <div class="count">2</div>
      <div class="label">VollstÃ¤ndig konform</div>
    </div>
    <div class="summary-card warn">
      <div class="icon">âš ï¸</div>
      <div class="count">5</div>
      <div class="label">Teilweise konform</div>
    </div>
    <div class="summary-card fail">
      <div class="icon">ğŸ”´</div>
      <div class="count">7</div>
      <div class="label">Offene LÃ¼cken</div>
    </div>
    <div class="summary-card fail">
      <div class="icon">ğŸ’¶</div>
      <div class="count">30.000 â‚¬</div>
      <div class="label">Max. BuÃŸgeld pro VerstoÃŸ</div>
    </div>
  </div>

  <div class="controls">
    <button class="btn" onclick="setAll(true)">Alle aufklappen</button>
    <button class="btn" onclick="setAll(false)">Alle zuklappen</button>
  </div>

  <!-- Â§ 3 -->
  <div class="section open" id="s3">
    <div class="section-header" onclick="toggle('s3')">
      <span class="section-par">Â§ 3</span>
      <span class="section-title">TÃ¤gliche HÃ¶chstarbeitszeit</span>
      <span class="section-status">âš ï¸</span>
      <span class="section-chevron">â–¼</span>
    </div>
    <div class="section-body">
      <div class="law-box">
        <strong>Gesetzliche Pflicht:</strong>
        <ul>
          <li>Max. <strong>8 Stunden</strong> werktÃ¤gliche Arbeitszeit</li>
          <li>VerlÃ¤ngerung auf <strong>10 Stunden</strong> erlaubt, wenn Ausgleich innerhalb <strong>6 Kalendermonaten / 24 Wochen</strong> auf â‰¤ 8h Durchschnitt erfolgt</li>
        </ul>
      </div>
      <table>
        <tr><th>Anforderung</th><th>Status</th><th>Details</th></tr>
        <tr>
          <td>Warnung bei &gt; 8h/Tag</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td><code>DAILY_HOURS_WARNING</code> Flag + Frontend-Toast bei create / update / clock_out</td>
        </tr>
        <tr>
          <td>Hard-Stop bei &gt; 10h/Tag (User-Endpoints)</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td>HTTP 422 in <code>time_entries.py</code></td>
        </tr>
        <tr>
          <td>Â§3-Check bei Admin-Direkteintrag</td>
          <td><span class="badge badge-fail">âŒ Fehlt</span></td>
          <td><code>admin.py: admin_create_time_entry / admin_update_time_entry</code> â€“ nur Â§4-PrÃ¼fung, kein Â§3-Limit</td>
        </tr>
        <tr>
          <td>Â§3-Check bei Ã„nderungsantrÃ¤gen</td>
          <td><span class="badge badge-fail">âŒ Fehlt</span></td>
          <td><code>change_requests.py</code> ruft validate_daily_break auf, aber keinen Â§3-Check</td>
        </tr>
        <tr>
          <td>6-Monats-Ausgleichszeitraum</td>
          <td><span class="badge badge-fail">âŒ Fehlt</span></td>
          <td>Kein Tracking ob monatlicher Durchschnitt â‰¤ 8h eingehalten wird</td>
        </tr>
      </table>
    </div>
  </div>

  <!-- Â§ 4 -->
  <div class="section open" id="s4">
    <div class="section-header" onclick="toggle('s4')">
      <span class="section-par">Â§ 4</span>
      <span class="section-title">Ruhepausen (Pflichtpausen)</span>
      <span class="section-status">âš ï¸</span>
      <span class="section-chevron">â–¼</span>
    </div>
    <div class="section-body">
      <div class="law-box">
        <strong>Gesetzliche Pflicht:</strong>
        <ul>
          <li>Arbeit &gt; 6 Stunden â†’ mind. <strong>30 Minuten</strong> Pause</li>
          <li>Arbeit &gt; 9 Stunden â†’ mind. <strong>45 Minuten</strong> Pause</li>
          <li>Maximale Arbeitszeit ohne jede Pause: <strong>6 Stunden</strong></li>
          <li>Pausen kÃ¶nnen aufgeteilt werden (mind. 15 min je Einheit)</li>
        </ul>
      </div>
      <table>
        <tr><th>Anforderung</th><th>Status</th><th>Details</th></tr>
        <tr>
          <td>Pausenfeld im Zeiteintrag</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td><code>break_minutes</code> bei allen ZeiteintrÃ¤gen erfasst und gespeichert</td>
        </tr>
        <tr>
          <td>&gt;6h â†’ mind. 30min Pause erzwingen</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td><code>break_validation_service.validate_daily_break()</code> â€“ aktiv bei create / update / clock_out / admin / change_requests</td>
        </tr>
        <tr>
          <td>&gt;9h â†’ mind. 45min Pause erzwingen</td>
          <td><span class="badge badge-fail">âŒ Fehlt</span></td>
          <td><code>break_validation_service.py</code> prÃ¼ft <strong>nur</strong> die 6h/30min-Bedingung â€“ die 9h/45min-Regel fehlt vollstÃ¤ndig</td>
        </tr>
      </table>
    </div>
  </div>

  <!-- Â§ 5 -->
  <div class="section open" id="s5">
    <div class="section-header" onclick="toggle('s5')">
      <span class="section-par">Â§ 5</span>
      <span class="section-title">Mindestruhezeit zwischen Schichten</span>
      <span class="section-status">âœ…</span>
      <span class="section-chevron">â–¼</span>
    </div>
    <div class="section-body">
      <div class="law-box">
        <strong>Gesetzliche Pflicht:</strong>
        <ul>
          <li>Mind. <strong>11 Stunden ununterbrochene Ruhezeit</strong> nach Arbeitsende</li>
          <li>Ausnahmen in bestimmten Bereichen (z.B. KrankenhÃ¤user) mit Ausgleich innerhalb 4 Wochen</li>
        </ul>
      </div>
      <table>
        <tr><th>Anforderung</th><th>Status</th><th>Details</th></tr>
        <tr>
          <td>11h-PrÃ¼fung zwischen Schichten</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td><code>rest_time_service.check_rest_time_violations()</code> â€“ vergleicht Ende/Start aufeinanderfolgender EintrÃ¤ge</td>
        </tr>
        <tr>
          <td>Admin-Report Ruhezeit-VerstÃ¶ÃŸe</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td><code>GET /api/admin/reports/rest-time-violations</code> mit Jahr, optionalem Monat, konfigurierbarem Schwellwert</td>
        </tr>
        <tr>
          <td>Frontend-Anzeige</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td>Admin Reports-Seite zeigt betroffene Mitarbeiter, Datum und Stunden-Defizit</td>
        </tr>
      </table>
      <p class="ok-note">Â§ 5 ist vollstÃ¤ndig konform implementiert. âœ…</p>
    </div>
  </div>

  <!-- Â§ 6 -->
  <div class="section open" id="s6">
    <div class="section-header" onclick="toggle('s6')">
      <span class="section-par">Â§ 6</span>
      <span class="section-title">Nacht- und Schichtarbeit</span>
      <span class="section-status">âš ï¸</span>
      <span class="section-chevron">â–¼</span>
    </div>
    <div class="section-body">
      <div class="law-box">
        <strong>Gesetzliche Pflicht:</strong>
        <ul>
          <li><strong>Nachtzeit:</strong> 23:00â€“06:00 Uhr (Â§ 2 Abs. 3)</li>
          <li><strong>Nachtarbeitnehmer:</strong> mind. 48 NÃ¤chte/Jahr oder regelmÃ¤ÃŸig Nachtarbeit</li>
          <li>Max. <strong>8 Stunden/Nacht</strong> (verlÃ¤ngerbar auf 10h, Ausgleich innerhalb 1 Monat)</li>
          <li>Anspruch auf <strong>arbeitsmedizinische Untersuchung</strong></li>
          <li>Anspruch auf <strong>25%-Lohnzuschlag</strong> oder gleichwertige Freizeit bei regelmÃ¤ÃŸiger Nachtarbeit</li>
        </ul>
      </div>
      <table>
        <tr><th>Anforderung</th><th>Status</th><th>Details</th></tr>
        <tr>
          <td>Erkennung Nachtarbeit (23â€“6 Uhr)</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td><code>_is_night_work()</code> in <code>time_entries.py</code></td>
        </tr>
        <tr>
          <td><code>is_night_work</code> Flag in API</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td>In allen <code>TimeEntryResponse</code>-Endpoints zurÃ¼ckgegeben</td>
        </tr>
        <tr>
          <td>â€Nacht"-Badge im Frontend</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td>Indigo-Badge in <code>TimeTracking.tsx</code></td>
        </tr>
        <tr>
          <td>Admin-Report: Nachtarbeit-Statistik pro MA</td>
          <td><span class="badge badge-fail">âŒ Fehlt</span></td>
          <td>Kein Report Ã¼ber HÃ¤ufigkeit (48-NÃ¤chte-Schwellwert fÃ¼r Nachtarbeitnehmer-Status)</td>
        </tr>
        <tr>
          <td>Strengere 8h-Grenze fÃ¼r Nachtarbeitnehmer</td>
          <td><span class="badge badge-fail">âŒ Fehlt</span></td>
          <td>Alle Mitarbeiter haben dieselbe 10h Hard-Limit; keine Differenzierung</td>
        </tr>
        <tr>
          <td>Tracking arbeitsmedizinischer Untersuchungen</td>
          <td><span class="badge badge-fail">âŒ Fehlt</span></td>
          <td>Nicht vorgesehen im System</td>
        </tr>
      </table>
    </div>
  </div>

  <!-- Â§Â§ 9/10 -->
  <div class="section open" id="s9">
    <div class="section-header" onclick="toggle('s9')">
      <span class="section-par">Â§Â§ 9/10</span>
      <span class="section-title">Sonn- und Feiertagsruhe / Ausnahmen</span>
      <span class="section-status">âš ï¸</span>
      <span class="section-chevron">â–¼</span>
    </div>
    <div class="section-body">
      <div class="law-box">
        <strong>Â§ 9 â€“ Grundsatz:</strong> BeschÃ¤ftigungsverbot an Sonn- und Feiertagen <strong>0â€“24 Uhr</strong><br><br>
        <strong>Â§ 10 â€“ Ausnahmen u.a.:</strong> Gesundheitsversorgung, Notfalldienste â€“ <strong>dokumentationspflichtig!</strong><br>
        <span style="color:#dc2626; font-size:0.88rem;">Arztpraxen kÃ¶nnen unter Â§ 10 Nr. 1 fallen, mÃ¼ssen aber den Ausnahmegrund nachweisbar dokumentieren.</span>
      </div>
      <table>
        <tr><th>Anforderung</th><th>Status</th><th>Details</th></tr>
        <tr>
          <td>Sonntagserkennung</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td><code>weekday() == 6</code> in <code>_enrich_response()</code></td>
        </tr>
        <tr>
          <td>Feiertagserkennung (workalendar)</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td><code>is_holiday()</code> via DB â€“ alle BundeslÃ¤nder konfigurierbar (default: Bayern)</td>
        </tr>
        <tr>
          <td><code>is_sunday_or_holiday</code> Flag in API</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td>In allen <code>TimeEntryResponse</code>-Endpoints</td>
        </tr>
        <tr>
          <td><code>SUNDAY_WORK / HOLIDAY_WORK</code> Warnings</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td>In API-Response + Frontend Toast-Benachrichtigung beim Erstellen</td>
        </tr>
        <tr>
          <td>Visuelles Highlighting orange</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td>Orange Tabellenzeile + â€So/FT"-Badge in <code>TimeTracking.tsx</code></td>
        </tr>
        <tr>
          <td>Ausnahmegrund-Feld (Â§ 10 ArbZG)</td>
          <td><span class="badge badge-fail">âŒ Fehlt</span></td>
          <td>Kein Pflicht- oder optionales Feld zur Dokumentation des Â§ 10-Ausnahmegrunds</td>
        </tr>
        <tr>
          <td>Admin-Report: Feiertage gearbeitet</td>
          <td><span class="badge badge-fail">âŒ Fehlt</span></td>
          <td><code>sunday-summary</code> zÃ¤hlt nur Sonntage â€“ Feiertage fehlen als separate Statistik</td>
        </tr>
      </table>
    </div>
  </div>

  <!-- Â§ 11 -->
  <div class="section open" id="s11">
    <div class="section-header" onclick="toggle('s11')">
      <span class="section-par">Â§ 11</span>
      <span class="section-title">Ausgleich nach Sonn- und Feiertagsarbeit</span>
      <span class="section-status">âš ï¸</span>
      <span class="section-chevron">â–¼</span>
    </div>
    <div class="section-body">
      <div class="law-box">
        <strong>Gesetzliche Pflicht:</strong>
        <ul>
          <li>Mind. <strong>15 beschÃ¤ftigungsfreie Sonntage</strong> pro Jahr und Arbeitnehmer</li>
          <li>Ersatzruhetag nach Sonntagsarbeit: innerhalb <strong>2 Wochen</strong></li>
          <li>Ersatzruhetag nach Feiertagsarbeit: innerhalb <strong>8 Wochen</strong></li>
        </ul>
      </div>
      <table>
        <tr><th>Anforderung</th><th>Status</th><th>Details</th></tr>
        <tr>
          <td>15 freie Sonntage/Jahr â€“ Compliance-Report</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td><code>GET /api/admin/reports/sunday-summary</code> mit Jahresauswahl, GrÃ¼n/Rot-Bewertung pro MA</td>
        </tr>
        <tr>
          <td>Frontend Sunday-Report</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td>Tabelle in <code>admin/Reports.tsx</code> mit betroffenen Mitarbeitern</td>
        </tr>
        <tr>
          <td>Ersatzruhetag-Tracking Sonntagsarbeit (2 Wochen)</td>
          <td><span class="badge badge-fail">âŒ Fehlt</span></td>
          <td>Keine PrÃ¼fung ob nach Sonntagsarbeit innerhalb 2 Wochen ein freier Tag folgt</td>
        </tr>
        <tr>
          <td>Ersatzruhetag-Tracking Feiertagsarbeit (8 Wochen)</td>
          <td><span class="badge badge-fail">âŒ Fehlt</span></td>
          <td>Keine Verfolgung von Feiertagsersatzruhetagen</td>
        </tr>
      </table>
    </div>
  </div>

  <!-- Â§ 16 -->
  <div class="section open" id="s16">
    <div class="section-header" onclick="toggle('s16')">
      <span class="section-par">Â§ 16</span>
      <span class="section-title">Aufzeichnungs- und Aufbewahrungspflicht</span>
      <span class="section-status">âœ…</span>
      <span class="section-chevron">â–¼</span>
    </div>
    <div class="section-body">
      <div class="law-box">
        <strong>Gesetzliche Pflicht:</strong>
        <ul>
          <li>Aufzeichnung aller Arbeitszeiten, die <strong>8 Stunden werktÃ¤glich Ã¼berschreiten</strong></li>
          <li>Aufbewahrung der Aufzeichnungen: mind. <strong>2 Jahre</strong></li>
          <li><strong>Gesetzesaushang</strong> (ArbZG) am Arbeitsplatz</li>
        </ul>
      </div>
      <table>
        <tr><th>Anforderung</th><th>Status</th><th>Details</th></tr>
        <tr>
          <td>VollstÃ¤ndige Zeiterfassung in DB</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td>Start, Ende, Pausen, Datum, Mitarbeiter-ID gespeichert</td>
        </tr>
        <tr>
          <td>2-Jahres-Aufbewahrung dokumentiert</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td><code>INSTALLATION.md</code>: Backup-Anleitung mit pg_dump + Retention-Prozess</td>
        </tr>
        <tr>
          <td>Hinweis in docker-compose.yml</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td>Kommentar Ã¼ber Aufbewahrungspflicht am <code>postgres_data</code>-Volume</td>
        </tr>
        <tr>
          <td>Â§16-Hinweis im Admin-Frontend</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td>Hinweistext in Admin Reports-Seite unter â€Hinweise"</td>
        </tr>
        <tr>
          <td>Excel-Export als Nachweis</td>
          <td><span class="badge badge-ok">âœ… Implementiert</span></td>
          <td>Monats- und Jahresexporte (Classic + Detailliert) verfÃ¼gbar</td>
        </tr>
        <tr>
          <td>Digitaler Gesetzesaushang</td>
          <td><span class="badge badge-warn">âš ï¸ Niedrig</span></td>
          <td>Kein Link/Hinweis auf ArbZG-Text im System â€“ manuell aushÃ¤ngen erforderlich</td>
        </tr>
      </table>
      <p class="ok-note">Â§ 16 ist weitgehend konform â€“ Gesetzesaushang ist die einzige LÃ¼cke (niedriges Risiko). âœ…</p>
    </div>
  </div>

  <!-- BuÃŸgelder -->
  <div class="section" id="s22">
    <div class="section-header" onclick="toggle('s22')">
      <span class="section-par">Â§Â§ 22/23</span>
      <span class="section-title">BuÃŸgeld- und Strafvorschriften</span>
      <span class="section-status">âš–ï¸</span>
      <span class="section-chevron">â–¼</span>
    </div>
    <div class="section-body">
      <table class="fine-table">
        <tr><th>VerstoÃŸ</th><th>Â§</th><th>Sanktion</th></tr>
        <tr><td>Ãœberschreitung der Tages-HÃ¶chstarbeitszeit</td><td>Â§ 3</td><td>bis 30.000 â‚¬</td></tr>
        <tr><td>Fehlende oder unzureichende Ruhepause</td><td>Â§ 4</td><td>bis 30.000 â‚¬</td></tr>
        <tr><td>Verletzung der 11h-Mindestruhezeit</td><td>Â§ 5</td><td>bis 30.000 â‚¬</td></tr>
        <tr><td>VerstoÃŸ gegen Nachtarbeitsgrenzen</td><td>Â§ 6</td><td>bis 30.000 â‚¬</td></tr>
        <tr><td>UnzulÃ¤ssige Sonn-/FeiertagsbeschÃ¤ftigung</td><td>Â§ 9</td><td>bis 30.000 â‚¬</td></tr>
        <tr><td>Fehlende Aufzeichnung von Ãœberstunden</td><td>Â§ 16</td><td>bis 30.000 â‚¬</td></tr>
        <tr><td>Fehlender Gesetzesaushang</td><td>Â§ 16</td><td>bis 5.000 â‚¬</td></tr>
        <tr><td>VorsÃ¤tzliche GesundheitsgefÃ¤hrdung</td><td>Â§ 23</td><td>Freiheitsstrafe bis 1 Jahr</td></tr>
      </table>
    </div>
  </div>

  <!-- Compliance Matrix -->
  <div class="section" id="sm">
    <div class="section-header" onclick="toggle('sm')">
      <span class="section-par">Gesamt</span>
      <span class="section-title">VollstÃ¤ndige Compliance-Matrix</span>
      <span class="section-status">ğŸ“Š</span>
      <span class="section-chevron">â–¼</span>
    </div>
    <div class="section-body">
      <table>
        <tr><th style="width:38%">Anforderung</th><th style="width:8%">Â§</th><th style="width:16%">Status</th><th>Detail</th></tr>
        <tr><td>Warnung bei &gt;8h/Tag</td><td>Â§ 3</td><td><span class="badge badge-ok">âœ…</span></td><td>Toast + Flag bei allen User-Endpoints</td></tr>
        <tr><td>Hard-Stop bei &gt;10h/Tag (User)</td><td>Â§ 3</td><td><span class="badge badge-ok">âœ…</span></td><td>HTTP 422 in time_entries.py</td></tr>
        <tr><td>Â§3-Check bei Admin-Direkteintrag</td><td>Â§ 3</td><td><span class="badge badge-fail">âŒ</span></td><td>admin.py ohne Â§3-PrÃ¼fung</td></tr>
        <tr><td>Â§3-Check bei Ã„nderungsantrÃ¤gen</td><td>Â§ 3</td><td><span class="badge badge-fail">âŒ</span></td><td>change_requests.py ohne Â§3-PrÃ¼fung</td></tr>
        <tr><td>6-Monats-Ausgleichszeitraum</td><td>Â§ 3</td><td><span class="badge badge-fail">âŒ</span></td><td>Kein Durchschnitts-Tracking</td></tr>
        <tr><td>Pausenfeld erfasst</td><td>Â§ 4</td><td><span class="badge badge-ok">âœ…</span></td><td>break_minutes in allen EintrÃ¤gen</td></tr>
        <tr><td>&gt;6h â†’ 30min Pause erzwingen</td><td>Â§ 4</td><td><span class="badge badge-ok">âœ…</span></td><td>break_validation_service Ã¼berall aktiv</td></tr>
        <tr><td>&gt;9h â†’ 45min Pause erzwingen</td><td>Â§ 4</td><td><span class="badge badge-fail">âŒ</span></td><td>break_validation_service unvollstÃ¤ndig</td></tr>
        <tr><td>11h Mindestruhezeit prÃ¼fen</td><td>Â§ 5</td><td><span class="badge badge-ok">âœ…</span></td><td>rest_time_service + Admin-Report</td></tr>
        <tr><td>Nachtarbeit erkennen (23â€“6 Uhr)</td><td>Â§ 6</td><td><span class="badge badge-ok">âœ…</span></td><td>_is_night_work() + Badge</td></tr>
        <tr><td>Nachtarbeit-Report / Statistik</td><td>Â§ 6</td><td><span class="badge badge-fail">âŒ</span></td><td>Kein Admin-Report</td></tr>
        <tr><td>8h-Limit fÃ¼r Nachtarbeitnehmer</td><td>Â§ 6</td><td><span class="badge badge-fail">âŒ</span></td><td>Alle Mitarbeiter: 10h Limit</td></tr>
        <tr><td>Sonntagserkennung + Badge</td><td>Â§ 9</td><td><span class="badge badge-ok">âœ…</span></td><td>weekday()==6 + Flag + orange Badge</td></tr>
        <tr><td>Feiertagserkennung (workalendar)</td><td>Â§ 9</td><td><span class="badge badge-ok">âœ…</span></td><td>DB-basiert, bundeslandkonfigurierbar</td></tr>
        <tr><td>SUNDAY_WORK / HOLIDAY_WORK Warnings</td><td>Â§ 9/10</td><td><span class="badge badge-ok">âœ…</span></td><td>API + Frontend-Toast</td></tr>
        <tr><td>Ausnahmegrund-Feld (Â§ 10)</td><td>Â§ 10</td><td><span class="badge badge-fail">âŒ</span></td><td>Kein Dokumentationsfeld</td></tr>
        <tr><td>15 freie Sonntage/Jahr Report</td><td>Â§ 11</td><td><span class="badge badge-ok">âœ…</span></td><td>/api/admin/reports/sunday-summary</td></tr>
        <tr><td>Ersatzruhetag Sonntag (2 Wochen)</td><td>Â§ 11</td><td><span class="badge badge-fail">âŒ</span></td><td>Nicht implementiert</td></tr>
        <tr><td>Ersatzruhetag Feiertag (8 Wochen)</td><td>Â§ 11</td><td><span class="badge badge-fail">âŒ</span></td><td>Nicht implementiert</td></tr>
        <tr><td>Zeiterfassung vollstÃ¤ndig in DB</td><td>Â§ 16</td><td><span class="badge badge-ok">âœ…</span></td><td>Alle Felder gespeichert</td></tr>
        <tr><td>2-Jahre-Retention dokumentiert</td><td>Â§ 16</td><td><span class="badge badge-ok">âœ…</span></td><td>INSTALLATION.md + docker-compose</td></tr>
      </table>
    </div>
  </div>

  <!-- MaÃŸnahmen -->
  <div class="section open" id="sp">
    <div class="section-header" onclick="toggle('sp')">
      <span class="section-par">MaÃŸnahmen</span>
      <span class="section-title">Verbleibende MaÃŸnahmen (priorisiert)</span>
      <span class="section-status">ğŸ¯</span>
      <span class="section-chevron">â–¼</span>
    </div>
    <div class="section-body">
      <h3>Prio 1 â€“ Gesetzlich direkt gefordert (BuÃŸgeldrisiko)</h3>
      <ul class="prio-list" style="margin-top:0.5rem;">
        <li class="p1">
          <span class="prio-tag">P1</span>
          <div><strong>Â§ 4: 9h/45min-Pausenregel</strong> â€“ <code>break_validation_service.py</code> um zweite Bedingung erweitern: bei Netto-Arbeitszeit &gt; 9h muss Gesamtpause â‰¥ 45min sein</div>
        </li>
        <li class="p1">
          <span class="prio-tag">P1</span>
          <div><strong>Â§ 3: Admin-Endpoints absichern</strong> â€“ <code>admin.py: admin_create_time_entry / admin_update_time_entry</code> und <code>change_requests.py</code> mit Â§3-Tagesgrenze (10h Hard-Stop) nachrÃ¼sten</div>
        </li>
      </ul>

      <h3>Prio 2 â€“ Compliance-Dokumentation</h3>
      <ul class="prio-list" style="margin-top:0.5rem;">
        <li class="p2">
          <span class="prio-tag">P2</span>
          <div><strong>Â§ 10: Ausnahmegrund-Feld</strong> â€“ Optionales Textfeld â€Ausnahmegrund (Â§ 10 ArbZG)" bei Sonn-/FeiertagseintrÃ¤gen, um BehÃ¶rdenanfragen dokumentieren zu kÃ¶nnen</div>
        </li>
        <li class="p2">
          <span class="prio-tag">P2</span>
          <div><strong>Â§ 6: Nachtarbeit-Report</strong> â€“ Admin-Report: Anzahl Nachtschichten pro Mitarbeiter pro Jahr (Schwellwert: 48 NÃ¤chte = Nachtarbeitnehmer-Status)</div>
        </li>
        <li class="p2">
          <span class="prio-tag">P2</span>
          <div><strong>Â§ 11: Ersatzruhetag-Tracking</strong> â€“ PrÃ¼fung ob nach Sonntagsarbeit innerhalb 2 Wochen ein freier Tag (kein Zeiteintrag) folgt</div>
        </li>
      </ul>

      <h3>Prio 3 â€“ Nice-to-have</h3>
      <ul class="prio-list" style="margin-top:0.5rem;">
        <li class="p3">
          <span class="prio-tag">P3</span>
          <div><strong>Â§ 14: Wochenarbeitszeit</strong> â€“ Warnung bei &gt; 48h/Woche im Dashboard oder bei Eintragung</div>
        </li>
        <li class="p3">
          <span class="prio-tag">P3</span>
          <div><strong>Â§ 18: Ausnahme-Flag</strong> â€“ Benutzerfeld â€leitender Angestellter" (Â§ 18 ArbZG) â†’ von ArbZG-PrÃ¼fungen ausschlieÃŸen</div>
        </li>
        <li class="p3">
          <span class="prio-tag">P3</span>
          <div><strong>Â§ 16: Gesetzesaushang</strong> â€“ Link auf ArbZG-Text (gesetze-im-internet.de) in Admin-Bereich ergÃ¤nzen</div>
        </li>
      </ul>
    </div>
  </div>

  <div class="hint-box">
    <strong>Rechtlicher Hinweis:</strong> Diese Analyse ersetzt keine Rechtsberatung. Arbeitgeber sind selbst verantwortlich fÃ¼r die Einhaltung des ArbZG.
    Bei Fragen zur Anwendung einzelner Vorschriften sollte ein Fachanwalt fÃ¼r Arbeitsrecht hinzugezogen werden.
  </div>

</div>

<script>
  function toggle(id) {
    document.getElementById(id).classList.toggle('open');
  }
  function setAll(open) {
    document.querySelectorAll('.section').forEach(s => {
      open ? s.classList.add('open') : s.classList.remove('open');
    });
  }
</script>
</body>
</html>
